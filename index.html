<!DOCTYPE html>
<html>
<head>
    <title>Pong Game</title>
    <style>
        * { padding: 0; margin: 0; }
        canvas { background: #000; display: block; margin: 0 auto; }
        #restart { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 20px; padding: 10px 20px; }
        .score-board { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); text-align: center; color: white; font-family: Arial, sans-serif; }
        .score-board .score { font-size: 24px; }
        .score-board .score span { font-size: 30px; font-weight: bold; }
    </style>
</head>
<body>
    <canvas id="pong"></canvas>
    <button id="restart">Restart Game</button>
    <div class="score-board">
        <div class="score">Player 1: <span id="score1">0</span></div>
        <div class="score">Player 2: <span id="score2">0</span></div>
    </div>
    <script>
        const canvas = document.getElementById("pong");
        const context = canvas.getContext("2d");
        const restartButton = document.getElementById("restart");
        const score1Element = document.getElementById("score1");
        const score2Element = document.getElementById("score2");

        const BASE_WIDTH = 800;
        const BASE_HEIGHT = 500;
        let scale = 1;

        function resizeCanvas() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            const widthScale = width / BASE_WIDTH;
            const heightScale = height / BASE_HEIGHT;

            scale = Math.min(widthScale, heightScale);

            canvas.width = BASE_WIDTH * scale;
            canvas.height = BASE_HEIGHT * scale;

            context.scale(scale, scale);
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        const ball = new Image();
        ball.src = "pelota.png";

        const ballPower1 = new Image();
        ballPower1.src = "pelotapower1.png";

        const ballPower2 = new Image();
        ballPower2.src = "pelotapower2.png";

        const player1 = new Image();
        player1.src = "jugador1.png";

        const player2 = new Image();
        player2.src = "jugador2.png";

        const ballObj = { x: BASE_WIDTH / 2, y: BASE_HEIGHT / 2, dx: 4, dy: 4, radius: 10, speed: 2, image: ball };
        const playerWidth = 20, playerHeight = 100, playerSpeed = 4;
        let leftPlayerY = BASE_HEIGHT / 2, rightPlayerY = BASE_HEIGHT / 2;
        let upArrow = false, downArrow = false, wKey = false, sKey = false, dKey = false, rightArrow = false;
        let score1 = 0, score2 = 0;
        let boost1 = true, boost2 = true;
        let powerAnimation = 0;
        let trail = [];

        function animate() {
            context.clearRect(0, 0, BASE_WIDTH, BASE_HEIGHT);
            context.drawImage(ballObj.image, ballObj.x, ballObj.y, ballObj.radius, ballObj.radius);
            context.drawImage(player1, 0, leftPlayerY, playerWidth, playerHeight);
            context.drawImage(player2, BASE_WIDTH - playerWidth, rightPlayerY, playerWidth, playerHeight);
            ballObj.x += ballObj.dx;
            ballObj.y += ballObj.dy;

            if(wKey && leftPlayerY > 0) leftPlayerY -= playerSpeed;
            else if(sKey && (leftPlayerY < BASE_HEIGHT - playerHeight)) leftPlayerY += playerSpeed;

            if(upArrow && rightPlayerY > 0) rightPlayerY -= playerSpeed;
            else if(downArrow && (rightPlayerY < BASE_HEIGHT - playerHeight)) rightPlayerY += playerSpeed;

            if(ballObj.y + ballObj.radius > BASE_HEIGHT || ballObj.y - ballObj.radius < 0) ballObj.dy *= -1;
            if(ballObj.dx < 0 && ballObj.y + ballObj.radius > leftPlayerY && ballObj.y - ballObj.radius < leftPlayerY + playerHeight && ballObj.x - ballObj.radius < playerWidth) { ballObj.dx *= -1; if(dKey && boost1) { ballObj.dx *= 3; ballObj.image = (powerAnimation++ % 15 < 7) ? ballPower1 : ballPower2; boost1 = false; } }
            else if(ballObj.dx > 0 && ballObj.y + ballObj.radius > rightPlayerY && ballObj.y - ballObj.radius < rightPlayerY + playerHeight && ballObj.x + ballObj.radius > BASE_WIDTH - playerWidth) { ballObj.dx *= -1; if(rightArrow && boost2) { ballObj.dx *= 3; ballObj.image = (powerAnimation++ % 15 < 7) ? ballPower1 : ballPower2; boost2 = false; } }
            else if(ballObj.x + ballObj.radius > BASE_WIDTH) { ballObj.x = BASE_WIDTH / 2; ballObj.y = BASE_HEIGHT / 2; score1++; ballObj.dx = 4; ballObj.image = ball; if(score1 % 3 == 0) boost1 = true; }
            else if(ballObj.x - ballObj.radius < 0) { ballObj.x = BASE_WIDTH / 2; ballObj.y = BASE_HEIGHT / 2; score2++; ballObj.dx = -4; ballObj.image = ball; if(score2 % 3 == 0) boost2 = true; }

            score1Element.textContent = score1;
            score2Element.textContent = score2;

            if(boost1) context.drawImage(ballPower1, 10, 10, 20, 20);
            if(boost2) context.drawImage(ballPower2, BASE_WIDTH - 30, 10, 20, 20);

            if(score1 == 7) { context.fillText("Player 1 Wins!", BASE_WIDTH / 2 - 50, BASE_HEIGHT / 2); restartButton.style.display = "block"; return; }
            if(score2 == 7) { context.fillText("Player 2 Wins!", BASE_WIDTH / 2 - 50, BASE_HEIGHT / 2); restartButton.style.display = "block"; return; }

            requestAnimationFrame(animate);
        }

        window.addEventListener("keydown", function(event) {
            switch(event.keyCode) {
                case 38: upArrow = true; break;
                case 40: downArrow = true; break;
                case 87: wKey = true; break;
                case 83: sKey = true; break;
                case 68: dKey = true; break;
                case 39: rightArrow = true; break;
            }
        }, false);

        window.addEventListener("keyup", function(event) {
            switch(event.keyCode) {
                case 38: upArrow = false; break;
                case 40: downArrow = false; break;
                case 87: wKey = false; break;
                case 83: sKey = false; break;
                case 68: dKey = false; break;
                case 39: rightArrow = false; break;
            }
        }, false);

        restartButton.addEventListener("click", function() {
            score1 = 0;
            score2 = 0;
            leftPlayerY = BASE_HEIGHT / 2;
            rightPlayerY = BASE_HEIGHT / 2;
            ballObj.x = BASE_WIDTH / 2;
            ballObj.y = BASE_HEIGHT / 2;
            ballObj.dx = 4;
            ballObj.dy = 4;
            ballObj.image = ball;
            boost1 = true;
            boost2 = true;
            restartButton.style.display = "none";
            animate();
        });

        animate();
    </script>
</body>
</html>
